(this.webpackJsonpspbus=this.webpackJsonpspbus||[]).push([[0],{173:function(e,a,t){e.exports=t(393)},393:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(22),o=t.n(r),s=t(23),i=t(24),c=t(27),u=t(28),d=t(3),m=t(14),p=t.n(m),h=function(e){Object(u.a)(t,e);var a=Object(c.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).pegaLinha=function(e){n.setState({linha:e.target.value})},n.pegaDados=function(e){n.setState({data:e.target.value})},n.autentica=n.autentica.bind(Object(d.a)(n)),n.pegaLinha=n.pegaLinha.bind(Object(d.a)(n)),n.state={linha:"",data:[]},n}return Object(i.a)(t,[{key:"autentica",value:function(e){var a=this;e.preventDefault(),p()({url:"https://aiko-estagio-proxy.azurewebsites.net/Login/Autenticar?token=17de5123a0a6a4256b6ef631d0e8348a3a5aece6b36427f41f43b0967131d2ed",method:"post"}).then((function(e){console.log(e),p.a.get("https://aiko-estagio-proxy.azurewebsites.net/Linha/Buscar",{params:{termosBusca:a.state.linha}}).then((function(e){var t=e.data;console.log(e),a.setState({data:t})}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){for(var e=[],a=[],t=0;t<this.state.data.length;t++){var n=this.state.data[t];a.push(l.a.createElement("div",null,n.cl)),e.push(l.a.createElement("tbody",{className:"table-body-linha"},l.a.createElement("tr",{className:"informacao-linha"},l.a.createElement("td",null,"C\xf3digo da Linha: ",n.cl),l.a.createElement("td",null,"Terminal principal: ",n.tp),l.a.createElement("td",null,"Terminal Secund\xe1rio: ",n.ts),l.a.createElement("td",null,"Sentido: ",n.sl))))}return l.a.createElement("div",null,l.a.createElement("form",{className:"form-linha",onSubmit:this.autentica},l.a.createElement("div",{className:"cobre-btn-linha"},l.a.createElement("label",null,l.a.createElement("input",{className:"procura-linha",type:"text",name:"linha",placeholder:"N\xfamero da linha",onChange:this.pegaLinha})),l.a.createElement("button",{className:"btn-pesquisar",name:"submit",id:"submit",type:"submit"},l.a.createElement("i",{className:"fa fa-search"})))),l.a.createElement("div",{className:"linha"},l.a.createElement("table",null,l.a.createElement("tbody",null,e))))}}]),t}(n.Component),g=(t(75),t(33)),b=function(e){Object(u.a)(t,e);var a=Object(c.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).pegaLinha=function(e){n.setState({linha:e.target.value})},n.pegaDados=function(e){n.setState({data:e.target.value})},n.autenticaParada=n.autenticaParada.bind(Object(d.a)(n)),n.pegaLinha=n.pegaLinha.bind(Object(d.a)(n)),n.state={refresh:(new Date).toLocaleTimeString(),linha:"",data:[],mapstyle:[{featureType:"poi",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit.station.bus",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]}]},n}return Object(i.a)(t,[{key:"componentDidMount",value:function(){this.autenticaParada()}},{key:"autenticaParada",value:function(){var e=this;p()({url:"https://aiko-estagio-proxy.azurewebsites.net/Login/Autenticar?token=17de5123a0a6a4256b6ef631d0e8348a3a5aece6b36427f41f43b0967131d2ed",method:"post"}).then((function(a){console.log(a),p.a.get("https://aiko-estagio-proxy.azurewebsites.net/Parada/Buscar",{params:{termosBusca:e.state.linha}}).then((function(a){var t=a.data;console.log(a),e.setState({data:t})}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){for(var e=this,a=[],t=0;t<this.props.latitudeParada.length;t++)a.push(l.a.createElement(g.Marker,{className:"stopBus",key:g.Marker.id,icon:{url:"http://maps.google.com/mapfiles/ms/icons/yellow-dot.png"},position:{lat:this.props.latitudeParada[t],lng:this.props.longitudeParada[t]}}));for(var n=[],r=0;r<this.state.data.length;r++){var o=this.state.data[r];n.push(l.a.createElement(g.Marker,{icon:{url:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png",scale:.01},position:{lat:o.py,lng:o.px}}))}var s=Object(g.withGoogleMap)((function(t){return l.a.createElement(g.GoogleMap,{key:t.id,defaultCenter:{lat:-23.5432,lng:-46.6292},defaultZoom:15,defaultOptions:{styles:e.state.mapstyle}},l.a.createElement(g.Marker,{icon:{url:"http://maps.google.com/mapfiles/ms/icons/red-dot.png"},position:{lat:-23.5432,lng:-46.6292}}),n,a)}));return l.a.createElement("div",null,this.item,l.a.createElement("div",{lat:this.latitude}),l.a.createElement(s,{key:g.GoogleMap.id,containerElement:l.a.createElement("div",{className:"map"}),mapElement:l.a.createElement("div",{className:"map"})}))}}]),t}(n.Component),f=function(e){Object(u.a)(t,e);var a=Object(c.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).pegaDados=function(e){n.setState({data:e.target.value})},n.autenticaPosicao=n.autenticaPosicao.bind(Object(d.a)(n)),n.pegaDados=n.pegaDados.bind(Object(d.a)(n)),n.codigoLinha=n.codigoLinha.bind(Object(d.a)(n)),n.pegaParada=n.pegaParada.bind(Object(d.a)(n)),n.state={data:[],linha:"",lat:null,lng:null,posLat:[]},n}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.autenticaPosicao(),window.navigator.geolocation.getCurrentPosition((function(a){return e.setState({lat:a.coords.latitude,lng:a.coords.longitude})}),(function(a){return e.setState({errorMessage:a.message})}))}},{key:"posVeiculo",value:function(){for(var e=[],a=[],t=this.state.data,n=0;n<t.length;n++)for(var l=0;l<t[n].vs.length;l++)e.push(t[n].vs[l].py),a.push(t[n].vs[l].px);return{posLat:e,posLng:a}}},{key:"codigoLinha",value:function(){this.props.codigoLinha}},{key:"pegaParada",value:function(e){this.setState({parada:e.target.value})}},{key:"autenticaPosicao",value:function(){var e=this;p()({method:"post",url:"https://aiko-estagio-proxy.azurewebsites.net/Login/Autenticar?token=17de5123a0a6a4256b6ef631d0e8348a3a5aece6b36427f41f43b0967131d2ed"}).then((function(a){console.log(a),p.a.get("https://aiko-estagio-proxy.azurewebsites.net/Posicao").then((function(a){var t=a.data.l;console.log(a),e.setState({data:t})})).catch((function(e){console.log(e,"erro meth get")}))})).catch((function(e){console.log(e,"erro meth Post")}))}},{key:"renderContent",value:function(){var e=this.posVeiculo();return!this.state.errorMessage||this.state.lat||this.state.lng?!this.state.errorMessage&&this.state.lat?l.a.createElement(b,{key:b.id,lat:this.state.lat,lng:this.state.lng,latitudeParada:e.posLat,longitudeParada:e.posLng}):void 0:l.a.createElement("div",null,"Error: ",this.state.errorMessage)}},{key:"render",value:function(){this.posVeiculo();for(var e=this.state.data,a=[],t=0;t<e.length;t++)for(var n=0;n<e[t].vs.length;n++)a.push(l.a.createElement("tbody",{className:"table-body"},l.a.createElement("tr",null,l.a.createElement("td",null,e[t].lt0),l.a.createElement("td",null,e[t].vs[n].py),l.a.createElement("td",null,e[t].vs[n].px))));return l.a.createElement("div",null,l.a.createElement("div",null,this.renderContent()))}}]),t}(l.a.Component),v=t(396),E=t(397),y=function(e){Object(u.a)(t,e);var a=Object(c.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).pegaLinha=function(e){n.setState({linha:e.target.value})},n.pegaDados=function(e){n.setState({data:e.target.value})},n.autenticaParada=n.autenticaParada.bind(Object(d.a)(n)),n.pegaLinha=n.pegaLinha.bind(Object(d.a)(n)),n.pegaParada=n.pegaParada.bind(Object(d.a)(n)),n.escondeModal=n.escondeModal.bind(Object(d.a)(n)),n.apareceModalParada=n.apareceModalParada.bind(Object(d.a)(n)),n.state={linha:"",data:[],previsao:[],apareceModal:!1},n}return Object(i.a)(t,[{key:"apareceModalParada",value:function(){return this.setState({apareceModalParada:!0})}},{key:"escondeModal",value:function(){return this.setState({apareceModal:!1})}},{key:"autenticaParada",value:function(e){var a=this;e.preventDefault(),p()({url:"https://aiko-estagio-proxy.azurewebsites.net/Login/Autenticar?token=17de5123a0a6a4256b6ef631d0e8348a3a5aece6b36427f41f43b0967131d2ed",method:"post"}).then((function(e){console.log(e),p.a.get("https://aiko-estagio-proxy.azurewebsites.net/Parada/Buscar",{params:{termosBusca:a.state.linha}}).then((function(e){var t=e.data;console.log(e),a.setState({data:t})}))})).catch((function(e){console.log(e)}))}},{key:"pegaParada",value:function(e){var a=this;p()({url:"https://aiko-estagio-proxy.azurewebsites.net/Login/Autenticar?token=17de5123a0a6a4256b6ef631d0e8348a3a5aece6b36427f41f43b0967131d2ed",method:"post"}).then((function(t){console.log(t),p.a.get("https://aiko-estagio-proxy.azurewebsites.net/Previsao/Parada",{params:{codigoParada:e}}).then((function(e){var t=[e.data.p];return a.setState({previsao:t})})).catch((function(e){console.log(e,"erro")}))})).catch((function(e){console.log(e)})),this.setState({apareceModal:!0})}},{key:"render",value:function(){var e=[];if(this.state.previsao[0])for(var a=this.state.previsao,t=0;t<a.length;t++)for(var n=0;n<a[t].l.length;n++)for(var r=0;r<a[t].l[n].vs.length;r++){var o=a[t].l[n].vs[r].t.split(":"),s=new Date,i=new Date;i.setHours(parseInt(o[0])),i.setMinutes(parseInt(o[1]));var c=Math.round((i-s)/1e3/60),u=c;c<=0&&(u="h\xe1 ".concat(-c)),e.push(l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Hor\xe1rio: ",a[t].l[n].vs[r].t),l.a.createElement("td",null,"Letreiro: ",a[t].l[n].lt0),l.a.createElement("td",null,"Passa em: ",u," min")))))}for(var d=[],m=0;m<this.state.data.length;m++){var p=this.state.data[m];d.push(l.a.createElement("table",null,l.a.createElement("tbody",{className:"paradas"},l.a.createElement("tr",{className:"endereco-parada"},l.a.createElement("td",null,"Parada: ",p.np),l.a.createElement("td",null,"Rua: ",p.ed),l.a.createElement("td",null,l.a.createElement("button",{className:"btn-horario",onClick:this.pegaParada.bind(this,p.cp)},"hor\xe1rios"),l.a.createElement(v.a,{className:"modal",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:this.state.apareceModal,onHide:this.escondeModal},l.a.createElement(v.a.Header,{closeButton:!0},l.a.createElement(v.a.Title,{id:"contained-modal-title-vcenter"},"Hor\xe1rios e \xf4nibus que passam nessa parada:")),l.a.createElement(v.a.Body,null,e),l.a.createElement(v.a.Footer,null,l.a.createElement(E.a,{variant:"secondary",className:"btn-voltar",onClick:this.escondeModal},"voltar"))))))))}return l.a.createElement("div",null,this.item,l.a.createElement("form",{className:"form-parada",onSubmit:this.autenticaParada},l.a.createElement("div",{className:"cobre-btn-parada"},l.a.createElement("label",null,l.a.createElement("input",{className:"procura-parada",placeholder:"Nome da Parada",type:"text",name:"linha",onChange:this.pegaLinha})),l.a.createElement("button",{className:"btn-pesquisar",name:"submit",id:"submit",type:"submit"},l.a.createElement("i",{className:"fa fa-search"})))),l.a.createElement("div",{className:"paradas"},l.a.createElement("table",null,l.a.createElement("tbody",null,d))))}}]),t}(n.Component),k=function(e){Object(u.a)(t,e);var a=Object(c.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"main-div-layout"},l.a.createElement("div",{className:"layout"},l.a.createElement("div",{className:"alinhar"},l.a.createElement("h1",{className:"titulo"},"SP Bus"),l.a.createElement("div",{className:"scroll-parada"}," ",l.a.createElement(y,{key:y.id})," "),l.a.createElement("div",{className:"scroll-linha"}," ",l.a.createElement(h,{key:h.id}))),l.a.createElement(f,{key:f.id})))}}]),t}(n.Component),P=function(){return l.a.createElement(k,null)};o.a.render(l.a.createElement(P,null),document.querySelector("#root"))},75:function(e,a,t){}},[[173,1,2]]]);
//# sourceMappingURL=main.7fd199c3.chunk.js.map